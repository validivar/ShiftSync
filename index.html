<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Verification Meta Tag -->
    <meta name="8ffef1bfcbff9b2301720697b0194ab783dac410" content="8ffef1bfcbff9b2301720697b0194ab783dac410" />
    
    <!-- AMP Auto Ads Script -->
    <script async custom-element="amp-auto-ads"
            src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <!-- ===== SECTION: SEO META TAGS ===== -->
    <!-- Primary Meta Tags -->
    <title>ShiftSync - World's Most Advanced Shift Scheduler for All Industries</title>
    <meta name="description" content="Mathematically perfect shift scheduling with 20+ pattern algorithms. AI-powered fairness, compliance tracking, and intelligent optimization. Free forever.No registration.">
    
    <!-- Keywords -->
    <meta name="keywords" content="intelligent shift scheduler, Panama plan, 4x4 schedule, Dupont shift, Pitman schedule, 4-10 shift, roster generator, advanced scheduling software, free shift planner">
    
    <!-- Open Graph -->
    <meta property="og:title" content="ShiftSync - Advanced AI Shift Scheduler">
    <meta property="og:description" content="Mathematically perfect scheduling with 20+ algorithms. Used by hospitals, factories, and 24/7 operations worldwide.">
    <meta property="og:description" content="Used by 5,000+ businesses worldwide. Create fair schedules in 60 seconds.">
    <meta property="og:image" content="https://shiftsync.world/social-preview.png">
    <meta property="og:url" content="https://shiftsync.world">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ShiftSync - Advanced Shift Scheduler">
    <meta name="twitter:description" content="Mathematically perfect scheduling with 20+ algorithms">
    <meta name="twitter:image" content="https://shiftsync.world/twitter-preview.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://shiftsync.world">
    
    <!-- AdSense Auto Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8822656067358458"
     crossorigin="anonymous"></script>
    
    <!-- ===== SECTION: STRUCTURED DATA ===== -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "ShiftSync",
      "description": "Advanced AI-powered shift scheduler with 20+ mathematical algorithms",
      "url": "https://shiftsync.world",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": "Panama Plan, 4x4 Schedule, Dupont Shift, Pitman Schedule, 4-10 Schedule, DDNNOO Shift, Mathematical Optimization, Compliance Tracking, Leave Management",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "1000"
      }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚è∞</text></svg>">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: #334155;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        /* ===== HEADER ===== */
        header {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 30px 50px;
            position: relative;
            overflow: hidden;
        }
        
        .pro-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .header-content {
            position: relative;
            z-index: 2;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            background: rgba(255, 255, 255, 0.2);
            width: 70px;
            height: 70px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .logo-text h1 {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.1;
        }
        
        .logo-text .tagline {
            font-size: 1.2rem;
            opacity: 0.95;
            margin-top: 8px;
        }
        
        .industry-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            max-width: 800px;
        }
        
        .industry-tag {
            background: rgba(255, 255, 255, 0.15);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: default;
        }
        
        .intelligence-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 25px;
            border-radius: 50px;
            margin-top: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* ===== AD STYLES ===== */
        .ad-container {
            margin: 20px 0;
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            text-align: center;
        }
        
        .ad-label {
            display: inline-block;
            background: #3b82f6;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .adsbygoogle {
            border-radius: 8px;
            overflow: hidden;
        }
        
        /* ===== MAIN APP LAYOUT ===== */
        .app-container {
            display: flex;
            min-height: 800px;
        }
        
        .control-panel {
            flex: 0 0 500px;
            padding: 30px;
            background: #f8fafc;
            border-right: 1px solid #e2e8f0;
            overflow-y: auto;
            max-height: 1200px;
        }
        
        .roster-display {
            flex: 1;
            padding: 30px;
            background: white;
            overflow-x: auto;
            min-height: 800px;
        }
        
        /* ===== SECTIONS ===== */
        .section {
            margin-bottom: 30px;
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
            border: 1px solid #e2e8f0;
        }
        
        .section-title {
            font-size: 1.3rem;
            color: #1e40af;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .section-title i {
            color: #3b82f6;
        }
        
        /* ===== FORM CONTROLS ===== */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #475569;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-hint {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 5px;
            font-style: italic;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #cbd5e1;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* ===== CASCADING DROPDOWNS ===== */
        .cascade-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        /* ===== SHIFT PATTERN CARDS ===== */
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .pattern-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pattern-card:hover {
            border-color: #93c5fd;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }
        
        .pattern-card.selected {
            border-color: #3b82f6;
            background: #eff6ff;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.1);
        }
        
        .pattern-icon {
            font-size: 2rem;
            color: #3b82f6;
            margin-bottom: 10px;
        }
        
        .pattern-name {
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 8px;
        }
        
        .pattern-desc {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.5;
        }
        
        /* ===== STAFF MANAGEMENT ===== */
        .staff-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .staff-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .staff-table th {
            background: #e2e8f0;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #475569;
            border-bottom: 2px solid #cbd5e1;
        }
        
        .staff-table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .staff-table tr:hover {
            background: #f1f5f9;
        }
        
        /* ===== TIME INPUTS ===== */
        .time-group {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 10px;
            align-items: center;
        }
        
        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        
        .btn-intelligent {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            font-size: 1.2rem;
            padding: 16px 32px;
        }
        
        .btn-intelligent:hover {
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            width: auto;
            padding: 10px 20px;
        }
        
        .btn-export {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            width: auto;
            padding: 10px 20px;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        /* ===== LOADING ===== */
        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .loading i {
            font-size: 2.5rem;
            color: #3b82f6;
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== ADVANCED ROSTER DISPLAY ===== */
        .roster-header {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
            padding: 20px;
            border-radius: 16px 16px 0 0;
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
        }
        
        .roster-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: #f8fafc;
            padding: 20px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .roster-table-container {
            margin-top: 20px;
            border-radius: 0 0 16px 16px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            overflow-x: auto;
        }
        
        .advanced-roster-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            min-width: 1200px;
        }
        
        .advanced-roster-table thead {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .advanced-roster-table th {
            padding: 16px 12px;
            text-align: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            min-width: 120px;
        }
        
        .advanced-roster-table td {
            padding: 14px 12px;
            text-align: center;
            border: 1px solid #f1f5f9;
            vertical-align: top;
        }
        
        .advanced-roster-table tr:nth-child(even) {
            background: #f8fafc;
        }
        
        /* ===== SHIFT INDICATORS ===== */
        .shift-indicator {
            padding: 8px 6px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            margin: 2px 0;
            display: inline-block;
            min-width: 60px;
            text-align: center;
        }
        
        .shift-M { background: #dbeafe; color: #1e40af; border: 1px solid #93c5fd; }
        .shift-A { background: #fef3c7; color: #92400e; border: 1px solid #fcd34d; }
        .shift-N { background: #fce7f3; color: #9d174d; border: 1px solid #f9a8d4; }
        .shift-N-2N2O { background: #1e3a8a; color: white; border: 1px solid #3b82f6; font-weight: 700; }
        .shift-N-3N3O { background: #1e40af; color: white; border: 1px solid #60a5fa; font-weight: 700; }
        .shift-N-4N4O { background: #1d4ed8; color: white; border: 1px solid #93c5fd; font-weight: 700; }
        .shift-N-5N5O { background: #3b82f6; color: white; border: 1px solid #bfdbfe; font-weight: 700; }
        .shift-N-7N7O { background: #60a5fa; color: white; border: 1px solid #dbeafe; font-weight: 700; }
        .shift-O { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
        .shift-L { background: #f3e8ff; color: #6b21a8; border: 1px solid #c4b5fd; }
        .shift-C { background: #fef3c7; color: #92400e; border: 1px dashed #f59e0b; }
        
        .leave-S { background: #fee2e2; color: #991b1b; }
        .leave-M { background: #fef3c7; color: #92400e; }
        .leave-P { background: #dbeafe; color: #1e40af; }
        .leave-A { background: #dcfce7; color: #166534; }
        .leave-ST { background: #f3e8ff; color: #6b21a8; }
        
        /* ===== FOOTER SECTION ===== */
        .roster-footer {
            background: #f8fafc;
            padding: 25px;
            border-radius: 16px;
            margin-top: 30px;
            border: 2px solid #e2e8f0;
        }
        
        .signature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .signature-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #cbd5e1;
            min-height: 120px;
        }
        
        /* ===== TOAST ===== */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #10b981;
            color: white;
            padding: 18px 28px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .app-container {
                flex-direction: column;
            }
            
            .control-panel {
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
                max-height: none;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .industry-tags {
                max-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            header {
                padding: 20px;
            }
            
            .logo-text h1 {
                font-size: 2rem;
            }
            
            .pattern-grid {
                grid-template-columns: 1fr;
            }
            
            .roster-header {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 15px;
            }
            
            .industry-tags {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- AMP Auto Ads Code -->
    <amp-auto-ads type="adsense"
            data-ad-client="ca-pub-8822656067358458">
    </amp-auto-ads>
    
    <!-- Header Ad - ShiftSync_Header_Responsive -->
    <div class="ad-container" style="margin: 0 auto 20px; max-width: 1200px;">
        <div class="ad-label">Advertisement</div>
        <!-- ShiftSync_Header_Responsive -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-8822656067358458"
             data-ad-slot="2487115772"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    
    <div class="container">
        <!-- HEADER -->
        <header>
            <div class="pro-badge">
                <i class="fas fa-crown"></i>Free Forever
            </div>
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="logo-text">
                        <h1>ShiftSync</h1>
                        <p class="tagline">Fair shifts for every worker. Perfect AI-powered shift scheduling.</p>
                        <div class="industry-tags">
                            <div class="industry-tag">Health & Social Care</div>
                            <div class="industry-tag">Manufacturing & Production</div>
                            <div class="industry-tag">Military & Security</div>
                            <div class="industry-tag">Retail & Warehouses</div>
                            <div class="industry-tag">Learning & Research Institutions</div>
                            <div class="industry-tag">Customer & Emergency Services</div>
                            <div class="industry-tag">Non-Governmental Organizations</div>
                            <div class="industry-tag">Financial & Legal firms</div>
                            <div class="industry-tag">Utility & Infrastructure</div>
                            <div class="industry-tag">Transportation & Logistics</div>
                            <div class="industry-tag">Governments & Agencies</div>
                            <div class="industry-tag">Large Scale Businesses</div>
                        </div>
                    </div>
                </div>
                
                <div class="intelligence-badge">
                    <i class="fas fa-robot"></i>
                    <span>20+ Advanced Algorithms ‚Ä¢ Compliance Tracking ‚Ä¢ Leave Management ‚Ä¢ Infinite Calendar</span>
                </div>
            </div>
        </header>

        <!-- MAIN APP -->
        <div class="app-container">
            <!-- CONTROL PANEL -->
            <div class="control-panel">
                <!-- Organization Details -->
                <div class="section">
                    <h2 class="section-title"><i class="fas fa-building"></i> Organization Setup</h2>
                    
                    <div class="form-group">
                        <label for="orgName"><i class="fas fa-landmark"></i> Organization Name</label>
                        <input type="text" id="orgName" placeholder="Enter organization name">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="department"><i class="fas fa-sitemap"></i> Department/Unit</label>
                            <input type="text" id="department" placeholder="e.g., Emergency Department">
                        </div>
                        
                        <div class="form-group">
                            <label for="cadre"><i class="fas fa-user-tie"></i> Cadre/Profession</label>
                            <input type="text" id="cadre" placeholder="e.g., Registered Nurses">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="rosterType"><i class="fas fa-users"></i> Roster Type</label>
                        <select id="rosterType">
                            <option value="permanent">Permanent Staff Only</option>
                            <option value="temporal">Temporal Staff Only</option>
                            <option value="voluntary">Voluntary Staff Only</option>
                            <option value="mixed">Mixed Employment</option>
                        </select>
                    </div>
                </div>

                <!-- Shift Pattern Selection -->
                <div class="section">
                    <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Shift Pattern Configuration</h2>
                    
                    <div class="form-group">
                        <label for="shiftType"><i class="fas fa-clock"></i> Shift Type</label>
                        <select id="shiftType">
                            <option value="">Select Shift Type</option>
                            <option value="4x4">4x4 Schedule (Morning/Evening/Night/Off)</option>
                            <option value="panama">Panama Plan (2-2-3 Schedule)</option>
                            <option value="pitman">Pitman Schedule (4 on, 4 off)</option>
                            <option value="dupont">Dupont Shift</option>
                            <option value="ddnnoo">DDNNOO Shift (2D/2N/2Off)</option>
                            <option value="4-10">4-10 Schedule (4 days, 10 hours)</option>
                            <option value="8hour">8-Hourly (5 days, 2 off)</option>
                            <option value="12hour">12-Hourly (3 on, 3 off)</option>
                            <option value="24hour">24-Hourly (24 on, 24 off)</option>
                            <option value="48hour">48-Hourly (Weekend Calls)</option>
                            <option value="60hour">60-Hourly</option>
                            <option value="72hour">72-Hourly</option>
                            <option value="80hour">80-Hourly (Maximum)</option>
                            <option value="mixed">Mixed Shifts (8hr + 12hr Extended Nights)</option>
                        </select>
                    </div>
                    
                    <!-- Pattern Details Display -->
                    <div id="patternDetails" style="background: #f0f9ff; padding: 15px; border-radius: 10px; margin-top: 15px; display: none;">
                        <h4><i class="fas fa-info-circle"></i> Pattern Details</h4>
                        <p id="patternDescription" style="color: #0369a1; font-size: 0.9rem;"></p>
                    </div>
                    
                    <!-- Shift Timing -->
                    <div class="form-row" style="margin-top: 20px;">
                        <div class="form-group">
                            <label><i class="fas fa-sun"></i> Morning Shift</label>
                            <div class="time-group">
                                <input type="time" id="morningStart" value="07:00">
                                <span>to</span>
                                <input type="time" id="morningEnd" value="15:00">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-cloud-sun"></i> Afternoon Shift</label>
                            <div class="time-group">
                                <input type="time" id="afternoonStart" value="15:00">
                                <span>to</span>
                                <input type="time" id="afternoonEnd" value="23:00">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-moon"></i> Night Shift</label>
                            <div class="time-group">
                                <input type="time" id="nightStart" value="23:00">
                                <span>to</span>
                                <input type="time" id="nightEnd" value="07:00">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Planning Period -->
                <div class="section">
                    <h2 class="section-title"><i class="fas fa-calendar-week"></i> Planning Period</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="startDate"><i class="fas fa-calendar-day"></i> Start Date</label>
                            <input type="date" id="startDate" value="2024-01-15" min="1960-01-01">
                        </div>
                        
                        <div class="form-group">
                            <label for="planningPeriod"><i class="fas fa-calendar-check"></i> Planning Period</label>
                            <select id="planningPeriod">
                                <option value="7">Weekly</option>
                                <option value="14" selected>Fortnightly (2 Weeks)</option>
                                <option value="28">Monthly (4 Weeks)</option>
                                <option value="56">Every 2 Months (8 Weeks)</option>
                                <option value="84">Quarterly (12 Weeks)</option>
                                <option value="168">Semi-Annually (24 Weeks)</option>
                                <option value="364">Annually (52 Weeks)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="breakDuration"><i class="fas fa-coffee"></i> Break Duration (minutes)</label>
                            <input type="number" id="breakDuration" value="30" min="0" max="180">
                        </div>
                        
                        <div class="form-group">
                            <label for="maxOvertime"><i class="fas fa-clock"></i> Max Overtime (hours/week)</label>
                            <input type="number" id="maxOvertime" value="12" min="0" max="80">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="minHoursWeek"><i class="fas fa-hourglass-start"></i> Min Hours/Week</label>
                            <input type="number" id="minHoursWeek" value="36" min="0" max="168">
                        </div>
                        
                        <div class="form-group">
                            <label for="maxHoursWeek"><i class="fas fa-hourglass-end"></i> Max Hours/Week</label>
                            <input type="number" id="maxHoursWeek" value="48" min="0" max="80">
                        </div>
                    </div>
                </div>

                <!-- Staff Management -->
                <div class="section">
                    <h2 class="section-title"><i class="fas fa-user-friends"></i> Staff Management</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName"><i class="fas fa-user"></i> First Name</label>
                            <input type="text" id="firstName" placeholder="First name">
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName"><i class="fas fa-user"></i> Last Name</label>
                            <input type="text" id="lastName" placeholder="Last name">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="staffRank"><i class="fas fa-star"></i> Rank/Designation</label>
                            <input type="text" id="staffRank" placeholder="e.g., Senior Nurse">
                        </div>
                        
                        <div class="form-group">
                            <label for="employmentType"><i class="fas fa-briefcase"></i> Employment Type</label>
                            <select id="employmentType">
                                <option value="permanent">Permanent</option>
                                <option value="temporal">Temporal</option>
                                <option value="voluntary">Voluntary</option>
                                <option value="contract">Contract</option>
                                <option value="mixed">Mixed</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="shiftPreference"><i class="fas fa-heart"></i> Shift Preference</label>
                        <select id="shiftPreference">
                            <option value="any">Any Shift</option>
                            <option value="morning">Morning Only</option>
                            <option value="afternoon">Afternoon Only</option>
                            <option value="night">Night Only</option>
                            <option value="weekend">Weekend Preference (Fri-Sun)</option>
                            <option value="nocall">No Call Duties</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn-secondary" onclick="addStaff()">
                            <i class="fas fa-user-plus"></i> Add Staff Member
                        </button>
                    </div>
                    
                    <div class="staff-section">
                        <table class="staff-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Rank</th>
                                    <th>Type</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="staffList">
                                <tr>
                                    <td colspan="4" style="text-align: center; color: #94a3b8; padding: 30px;">
                                        <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                        <p>No staff members added yet</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Sidebar Ad 1 - ShiftSync_Sidebar_Control_Responsive -->
                <div class="ad-container" style="margin-top: 30px;">
                    <div class="ad-label">Advertisement</div>
                    <!-- ShiftSync_Sidebar_Control_Responsive -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-format="fluid"
                         data-ad-layout-key="-fb+5w+4e-db+86"
                         data-ad-client="ca-pub-8822656067358458"
                         data-ad-slot="9982462410"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- Generate Button -->
                <div class="loading" id="loading">
                    <i class="fas fa-cog"></i>
                    <p>AI is computing mathematically perfect schedule...</p>
                </div>
                
                <button class="btn btn-intelligent" onclick="generateIntelligentRoster()">
                    <i class="fas fa-brain"></i> Generate Intelligent Roster
                </button>
            </div>

            <!-- ROSTER DISPLAY -->
            <div class="roster-display">
                <!-- Roster Header -->
                <div class="roster-header">
                    <div>
                        <h2 style="margin-bottom: 10px; font-size: 1.8rem;">AI-Generated Roster</h2>
                        <p style="opacity: 0.9;">Mathematically optimized for fairness and compliance</p>
                    </div>
                    <div class="ai-badge" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                        <i class="fas fa-robot"></i> AI-Optimized Schedule
                    </div>
                </div>

                <!-- Roster Metadata -->
                <div class="roster-meta" id="rosterMeta">
                    <div>
                        <strong>Organization:</strong> <span id="metaOrg">Not specified</span>
                    </div>
                    <div>
                        <strong>Department:</strong> <span id="metaDept">Not specified</span>
                    </div>
                    <div>
                        <strong>Period:</strong> <span id="metaPeriod">Not generated</span>
                    </div>
                    <div>
                        <strong>Staff Count:</strong> <span id="metaStaff">0</span>
                    </div>
                </div>

                <!-- Main Roster Display -->
                <div id="rosterOutput">
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <i class="fas fa-calendar-alt" style="font-size: 4rem; margin-bottom: 20px; color: #cbd5e1;"></i>
                        <h3 style="color: #475569; margin-bottom: 15px;">Advanced Roster Display</h3>
                        <p>Configure your settings and staff on the left, then click "Generate Intelligent Roster"</p>
                        <div style="margin-top: 30px; display: inline-flex; gap: 15px;">
                            <div style="text-align: left; background: #f8fafc; padding: 20px; border-radius: 12px;">
                                <h4><i class="fas fa-lightbulb"></i> Intelligence Features</h4>
                                <ul style="font-size: 0.9rem; color: #4b5563; margin-top: 10px; padding-left: 20px;">
                                    <li>Mathematical pattern optimization</li>
                                    <li>Leave and call duty management</li>
                                    <li>Compliance with hours limits</li>
                                    <li>Staff preference consideration</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Ad 2 - ShiftSync_Sidebar_Roster_Responsive -->
                <div class="ad-container" style="margin: 40px 0;">
                    <div class="ad-label">Advertisement</div>
                    <!-- ShiftSync_Sidebar_Roster_Responsive -->
                    <ins class="adsbygoogle"
                         style="display:block; text-align:center;"
                         data-ad-layout="in-article"
                         data-ad-format="fluid"
                         data-ad-client="ca-pub-8822656067358458"
                         data-ad-slot="8359563014"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- Export Options -->
                <div class="button-group" style="margin-top: 40px;">
                    <button class="btn-export" onclick="exportPDF()">
                        <i class="fas fa-file-pdf"></i> Export PDF
                    </button>
                    <button class="btn-export" onclick="exportExcel()">
                        <i class="fas fa-file-excel"></i> Export Excel
                    </button>
                    <button class="btn-export" onclick="printRoster()">
                        <i class="fas fa-print"></i> Print Roster
                    </button>
                    <button class="btn-export" onclick="saveRoster()">
                        <i class="fas fa-save"></i> Save Template
                    </button>
                </div>

                <!-- Roster Footer -->
                <div class="roster-footer">
                    <h3 style="color: #1e40af; margin-bottom: 20px;">
                        <i class="fas fa-signature"></i> Authorization & Signatures
                    </h3>
                    
                    <div class="signature-grid">
                        <div class="signature-box">
                            <label>Roster Prepared By:</label>
                            <div style="margin-top: 40px; border-top: 1px solid #cbd5e1; padding-top: 10px;">
                                <p>Name: _______________________</p>
                                <p>Rank: _______________________</p>
                                <p>Signature: __________________</p>
                                <p>Date: _______________________</p>
                            </div>
                        </div>
                        
                        <div class="signature-box">
                            <label>Supervisor/Unit Coordinator Approval:</label>
                            <div style="margin-top: 40px; border-top: 1px solid #cbd5e1; padding-top: 10px;">
                                <p>Name: _______________________</p>
                                <p>Rank: _______________________</p>
                                <p>Signature: __________________</p>
                                <p>Date: _______________________</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Ad - ShiftSync_Footer_Responsive -->
        <div class="ad-container" style="margin: 40px auto; max-width: 1200px;">
            <div class="ad-label">Advertisement</div>
            <!-- ShiftSync_Footer_Responsive -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-format="autorelaxed"
                 data-ad-client="ca-pub-8822656067358458"
                 data-ad-slot="3242967702"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- DONATION SECTION -->
        <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); 
                    padding: 50px 30px; 
                    text-align: center;
                    border-top: 3px solid #86efac;">
            
            <div style="font-size: 3rem; color: #16a34a; margin-bottom: 20px;">
                <i class="fas fa-leaf"></i>
            </div>
            
            <h2 style="color: #166534; margin-bottom: 20px; font-size: 2rem;">
                Keep ShiftSync Free & Green Forever
            </h2>
            
            <p style="color: #4b5563; max-width: 700px; margin: 0 auto 30px; line-height: 1.7; font-size: 1.1rem;">
                üå± <strong>ShiftSync runs on renewable energy.</strong><br>
                ‚úì 100% free forever ‚Ä¢ ‚úì Zero carbon footprint ‚Ä¢ ‚úì No data selling<br>
                Your donation helps us plant trees and keep fair scheduling accessible worldwide.
            </p>
            
            <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px;">
                
                <a href="https://pay.google.com" 
                   target="_blank" 
                   rel="noopener"
                   style="display: inline-flex; 
                          align-items: center; 
                          gap: 12px;
                          padding: 16px 32px;
                          background: linear-gradient(135deg, #4285f4 0%, #3367d6 100%);
                          color: white;
                          border-radius: 15px;
                          text-decoration: none;
                          font-weight: 600;
                          font-size: 1.1rem;
                          transition: all 0.3s;
                          box-shadow: 0 5px 20px rgba(66, 133, 244, 0.2);">
                    <i class="fab fa-google"></i>
                    Donate with Google Pay
                </a>
                
                <a href="https://www.paypal.com/donate?hosted_button_id=YOUR_BUTTON_ID" 
                   target="_blank" 
                   rel="noopener"
                   style="display: inline-flex; 
                          align-items: center; 
                          gap: 12px;
                          padding: 16px 32px;
                          background: linear-gradient(135deg, #003087 0%, #009cde 100%);
                          color: white;
                          border-radius: 15px;
                          text-decoration: none;
                          font-weight: 600;
                          font-size: 1.1rem;
                          transition: all 0.3s;
                          box-shadow: 0 5px 20px rgba(0, 48, 135, 0.2);">
                    <i class="fab fa-paypal"></i>
                    Support via PayPal
                </a>
                
                <button onclick="toggleGiftCard()"
                        style="display: inline-flex; 
                               align-items: center; 
                               gap: 12px;
                               padding: 16px 32px;
                               background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
                               color: white;
                               border-radius: 15px;
                               border: none;
                               font-weight: 600;
                               font-size: 1.1rem;
                               cursor: pointer;
                               transition: all 0.3s;
                               box-shadow: 0 5px 20px rgba(139, 92, 246, 0.2);">
                    <i class="fas fa-gift"></i>
                    Send eGift Card
                </button>
                
            </div>
            
            <!-- Crypto & Gift Card Options -->
            <div style="margin-top: 20px;">
                <button onclick="toggleCrypto()" 
                        style="background: none;
                               border: none;
                               color: #059669;
                               cursor: pointer;
                               font-size: 1rem;
                               padding: 12px 24px;
                               border-radius: 10px;
                               background: rgba(5, 150, 105, 0.1);
                               margin-right: 10px;">
                    <i class="fas fa-coins"></i> Cryptocurrency Options
                </button>
            </div>
            
            <div id="cryptoOptions" style="display: none; margin-top: 25px; animation: fadeIn 0.5s;">
                <div style="background: white; 
                            padding: 25px; 
                            border-radius: 15px; 
                            max-width: 800px; 
                            margin: 0 auto;
                            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                            border: 2px solid #86efac;">
                    
                    <p style="color: #4b5563; margin-bottom: 20px; text-align: center;">
                        <i class="fas fa-heart" style="color: #ef4444;"></i> 
                        <strong style="color: #166534;">Thank you!</strong> Crypto donations help us stay independent and green.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px; 
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #2775ca; display: block; margin-bottom: 10px;">
                                <i class="fas fa-coins"></i> USDC (TRC20):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="usdcTrc20" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    TAKkRRxbWE3Da4cViHuwHcpYp2eJ7ck3kp
                                </code>
                                <button onclick="copyCryptoAddress('usdcTrc20')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px;
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #0052ff; display: block; margin-bottom: 10px;">
                                <i class="fab fa-ethereum"></i> Ethereum (ETH):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="ethAddress" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    0x5C72D08357DFF83Bc72bF20E1ce2635282B74b6F
                                </code>
                                <button onclick="copyCryptoAddress('ethAddress')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px;
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #00d4aa; display: block; margin-bottom: 10px;">
                                <i class="fas fa-network-wired"></i> Solana (SOL):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="solAddress" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    EFmr8rwar9ABW4ViEd3jd162xaJTABxsby3VVK5dcWQx
                                </code>
                                <button onclick="copyCryptoAddress('solAddress')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px;
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #0088cc; display: block; margin-bottom: 10px;">
                                <i class="fas fa-bolt"></i> Toncoin (TON):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="tonAddress" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    UQDFWGn7dASEOrAM_9s3W6iIzxApfuzMV1cVXn5OdDCHk4GJ
                                </code>
                                <button onclick="copyCryptoAddress('tonAddress')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px;
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #f0b90b; display: block; margin-bottom: 10px;">
                                <i class="fas fa-code"></i> Pi Network (Pi):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="piAddress" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    GCIPVGGRXWKXI4ZIQCPT7HNNSGC6VHH6IO4DKFCQRLKMZMBNZETG4BAN
                                </code>
                                <button onclick="copyCryptoAddress('piAddress')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px;
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #ff6b35; display: block; margin-bottom: 10px;">
                                <i class="fab fa-usdc"></i> USDC (Base):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="usdcBase" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    0x5C72D08357DFF83Bc72bF20E1ce2635282B74b6F
                                </code>
                                <button onclick="copyCryptoAddress('usdcBase')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                        <div style="background: #f0f9ff; 
                                    padding: 20px; 
                                    border-radius: 12px;
                                    border: 1px solid #bae6fd;">
                            <strong style="color: #f0b90b; display: block; margin-bottom: 10px;">
                                <i class="fab fa-btc"></i> BNB Smart Chain (BEP20):
                            </strong>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <code id="bscAddress" 
                                      style="flex: 1; 
                                             background: white; 
                                             padding: 12px; 
                                             border-radius: 10px; 
                                             font-size: 0.85rem; 
                                             overflow: hidden; 
                                             text-overflow: ellipsis;
                                             border: 1px solid #cbd5e1;">
                                    0x97a0a4cd3c25df745403cf368784bc1022621162
                                </code>
                                <button onclick="copyCryptoAddress('bscAddress')"
                                        style="padding: 12px 20px;
                                               background: #3b82f6;
                                               color: white;
                                               border: none;
                                               border-radius: 10px;
                                               cursor: pointer;
                                               font-weight: 600;
                                               transition: all 0.3s;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            
            <!-- eGift Card Option -->
            <div id="giftCardOptions" style="display: none; margin-top: 25px; animation: fadeIn 0.5s;">
                <div style="background: white; 
                            padding: 25px; 
                            border-radius: 15px; 
                            max-width: 600px; 
                            margin: 20px auto 0;
                            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                            border: 2px solid #f3e8ff;">
                    
                    <h3 style="color: #7c3aed; margin-bottom: 15px;">
                        <i class="fas fa-gift"></i> Send eGift Card
                    </h3>
                    
                    <p style="color: #4b5563; margin-bottom: 20px; text-align: center;">
                        Gift cards are a great way to support us! You can send Amazon, Google Play, Apple, or any other gift cards.
                    </p>
                    
                    <div style="background: #faf5ff; padding: 20px; border-radius: 12px; border: 1px solid #e9d5ff;">
                        <strong style="color: #7c3aed; display: block; margin-bottom: 15px;">
                            <i class="fas fa-envelope"></i> Email for Gift Cards:
                        </strong>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <code id="giftCardEmail" 
                                  style="flex: 1; 
                                         background: white; 
                                         padding: 12px; 
                                         border-radius: 10px; 
                                         font-size: 0.9rem; 
                                         overflow: hidden; 
                                         text-overflow: ellipsis;
                                         border: 1px solid #cbd5e1;">
                                senarysystems.com@gmail.com
                            </code>
                            <button onclick="copyCryptoAddress('giftCardEmail')"
                                    style="padding: 12px 20px;
                                           background: #8b5cf6;
                                           color: white;
                                           border: none;
                                           border-radius: 10px;
                                           cursor: pointer;
                                           font-weight: 600;
                                           transition: all 0.3s;">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <p style="color: #64748b; font-size: 0.85rem; margin-top: 10px;">
                            <i class="fas fa-info-circle"></i> Please email the gift card code to this address. We'll send you a thank you note!
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAIN FOOTER -->
        <footer style="background: #1e293b; color: #cbd5e1; padding: 50px 40px;">
            
            <div style="max-width: 1200px; margin: 0 auto;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px;">
                    
                    <div>
                        <h3 style="color: white; margin-bottom: 20px; font-size: 1.3rem;">
                            <i class="fas fa-sync-alt"></i> ShiftSync
                        </h3>
                        <p style="color: #94a3b8; line-height: 1.6;">
                            Advanced AI-powered scheduling with mathematical optimization. Better and seamless work for everyone. 
                            ShiftSync is free forever for all organizations. Trusted by 5,000+ Businesses.
                        </p>
                    </div>
                    
                    <div>
                        <h3 style="color: white; margin-bottom: 20px; font-size: 1.3rem;">Quick Links</h3>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <a href="/" style="color: #94a3b8; text-decoration: none; transition: color 0.3s;">
                                <i class="fas fa-home"></i> Home
                            </a>
                            <a href="/about.html" style="color: #94a3b8; text-decoration: none; transition: color 0.3s;">
                                <i class="fas fa-info-circle"></i> About
                            </a>
                            <a href="/contact.html" style="color: #94a3b8; text-decoration: none; transition: color 0.3s;">
                                <i class="fas fa-envelope"></i> Contact
                            </a>
                            <a href="terms.html" style="color: #94a3b8; text-decoration: none; transition: color 0.3s;">
                                <i class="fas fa-file-contract"></i> Terms & Privacy
                           </a>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="color: white; margin-bottom: 20px; font-size: 1.3rem;">Contact</h3>
                        <div style="color: #94a3b8; line-height: 1.8;">
                            <p><i class="fas fa-envelope"></i> support@shiftsync.world</p>
                            <p><i class="fas fa-globe"></i> shiftsync.world</p>
                        </div>
                    </div>
                    
                </div>
                
                <div style="border-top: 1px solid #334155; padding-top: 30px; text-align: center;">
                    <p style="font-size: 1.1rem; margin-bottom: 15px; color: white;">
                        ShiftSync ¬© 2024 ‚Ä¢ Advanced AI Scheduling ‚Ä¢ Free Forever
                    </p>
                    
                    <p style="color: #94a3b8; margin-bottom: 20px; font-size: 0.9rem; line-height: 1.6;">
                        <i class="fas fa-exclamation-circle"></i> 
                        <strong>Disclosure:</strong> We may earn commissions from affiliate links at no extra cost to you. 
                        This helps keep ShiftSync free forever.
                    </p>
                    
                    <p style="color: #64748b; font-size: 0.9rem;">
                        <i class="fas fa-leaf" style="color: #86efac;"></i> 
                        Powered by renewable energy ‚Ä¢ 
                        <i class="fas fa-heart" style="color: #f87171;"></i> 
                        Made with mathematical precision, crafted with love and care for the working world.
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div class="toast" id="toast"></div>

    <!-- MAIN JAVASCRIPT -->
    <script>
        // ========== GLOBAL VARIABLES ==========
        const DateTime = luxon.DateTime;
        let staffMembers = [];
        let rosterData = [];
        let currentPattern = '';
        let patternDetails = {
            '4x4': {
                name: '4x4 Schedule',
                description: 'Morning (M), Evening (A), Night (N), Off (O) rotation. Employees cycle through each shift before repeating. Ensures adequate rest and avoids repetitive patterns.',
                cycle: 4,
                shifts: ['M', 'A', 'N', 'O'],
                hours: 8
            },
            'panama': {
                name: 'Panama Plan (2-2-3)',
                description: '12-hour shifts with pattern: 2 days on, 2 days off, 3 days on, 2 days off. Each team gets every other weekend off.',
                cycle: 7,
                pattern: [1,1,0,0,1,1,1,0,0],
                hours: 12
            },
            'pitman': {
                name: 'Pitman Schedule',
                description: 'Four 12-hour shifts followed by 4 days off. Provides long stretches of time off.',
                cycle: 8,
                pattern: [1,1,1,1,0,0,0,0],
                hours: 12
            },
            'dupont': {
                name: 'Dupont Shift',
                description: 'Complex pattern: 4 night shifts, 3 off, 3 day shifts, 1 off, 3 night shifts, 3 off, 4 day shifts, 7 off.',
                cycle: 28,
                pattern: 'N N N N O O O D D D O N N N O O O D D D D O O O O O O O',
                hours: 12
            },
            'ddnnoo': {
                name: 'DDNNOO Shift',
                description: '6-day cycle: 2 day shifts, 2 night shifts, 2 rest days.',
                cycle: 6,
                pattern: ['D', 'D', 'N', 'N', 'O', 'O'],
                hours: 12
            },
            '4-10': {
                name: '4-10 Schedule',
                description: 'Four 10-hour workdays with 3-day weekends. Meets 40-hour work week.',
                cycle: 7,
                pattern: [1,1,1,1,0,0,0],
                hours: 10
            },
            '8hour': {
                name: '8-Hour Schedule',
                description: 'Standard 8-hour shifts, 5 days per week with 2 days off.',
                cycle: 7,
                pattern: [1,1,1,1,1,0,0],
                hours: 8
            },
            '12hour': {
                name: '12-Hour Schedule',
                description: '12-hour shifts, typically 3 days on, 3 days off.',
                cycle: 6,
                pattern: [1,1,1,0,0,0],
                hours: 12
            },
            '24hour': {
                name: '24-Hour Schedule',
                description: '24 hours on duty, 24 hours off. Common for call duties.',
                cycle: 2,
                pattern: [1,0],
                hours: 24
            },
            '48hour': {
                name: '48-Hour Weekend Call',
                description: 'Continuous 48-hour weekend calls with minimum 48 hours off.',
                cycle: 7,
                pattern: [0,0,0,0,1,1,0],
                hours: 48
            },
            'mixed': {
               name: 'Mixed 8-12 Hour Schedule',
               description: 'Combines 8-hour and 12-hour shifts with varying night duty patterns: 2N/2O, 3N/3O, 4N/4O, 5N/5O, 7N/7O (Nights/Off). 60% staff on standard 8-hour shifts, 40% on extended 12-hour night duties.',
               cycle: 28,
               patterns: {
              '8hour': {
                name: '8-Hour Standard',
                shifts: ['M', 'A', 'N', 'O'],
                hours: 8
            },
            '12hour_2n2o': {
                name: '12-Hour (2N/2O)',
                description: '2 night shifts (12h) followed by 2 days off',
                pattern: ['N', 'N', 'O', 'O'],
                hours: 12
            },
            '12hour_3n3o': {
                name: '12-Hour (3N/3O)',
                description: '3 night shifts (12h) followed by 3 days off',
                pattern: ['N', 'N', 'N', 'O', 'O', 'O'],
                hours: 12
            },
            '12hour_4n4o': {
                name: '12-Hour (4N/4O)',
                description: '4 night shifts (12h) followed by 4 days off',
                pattern: ['N', 'N', 'N', 'N', 'O', 'O', 'O', 'O'],
                hours: 12
            },
            '12hour_5n5o': {
                name: '12-Hour (5N/5O)',
                description: '5 night shifts (12h) followed by 5 days off',
                pattern: ['N', 'N', 'N', 'N', 'N', 'O', 'O', 'O', 'O', 'O'],
                hours: 12
            },
            '12hour_7n7o': {
                name: '12-Hour (7N/7O)',
                description: '7 night shifts (12h) followed by 7 days off',
                pattern: ['N', 'N', 'N', 'N', 'N', 'N', 'N', 'O', 'O', 'O', 'O', 'O', 'O', 'O'],
                hours: 12
            }
        }
    }
};
        };

        // ========== INITIALIZATION ==========
        window.onload = function() {
            // Set default date to today
            const today = DateTime.now().toFormat('yyyy-MM-dd');
            document.getElementById('startDate').value = today;
            
            // Load saved data
            loadSavedData();
            
            // Set up event listeners
            setupEventListeners();
            
            // Show pattern details when selected
            document.getElementById('shiftType').addEventListener('change', function() {
                updatePatternDetails(this.value);
            });
        };

        // ========== EVENT LISTENERS ==========
        function setupEventListeners() {
            // Pattern selection
            document.getElementById('shiftType').addEventListener('change', function() {
                currentPattern = this.value;
                updatePatternDetails(currentPattern);
            });
            
            // Date validation
            document.getElementById('startDate').addEventListener('change', function() {
                const date = DateTime.fromISO(this.value);
                if (date.year < 1960) {
                    showToast('Please select a date from 1960 onwards', 'warning');
                    this.value = '1960-01-01';
                }
            });
        }

        // ========== PATTERN DETAILS ==========
        function updatePatternDetails(pattern) {
            const detailsDiv = document.getElementById('patternDetails');
            const descPara = document.getElementById('patternDescription');
            
            if (pattern && patternDetails[pattern]) {
                const details = patternDetails[pattern];
                descPara.textContent = details.description;
                detailsDiv.style.display = 'block';
                
                // Update shift hours if applicable
                if (details.hours === 12) {
                    document.getElementById('morningStart').value = '07:00';
                    document.getElementById('morningEnd').value = '19:00';
                    document.getElementById('afternoonStart').value = '19:00';
                    document.getElementById('afternoonEnd').value = '07:00';
                    document.getElementById('nightStart').value = '19:00';
                    document.getElementById('nightEnd').value = '07:00';
                } else if (details.hours === 8) {
                    document.getElementById('morningStart').value = '07:00';
                    document.getElementById('morningEnd').value = '15:00';
                    document.getElementById('afternoonStart').value = '15:00';
                    document.getElementById('afternoonEnd').value = '23:00';
                    document.getElementById('nightStart').value = '23:00';
                    document.getElementById('nightEnd').value = '07:00';
                } else if (details.hours === 10) {
                    document.getElementById('morningStart').value = '06:00';
                    document.getElementById('morningEnd').value = '16:00';
                    document.getElementById('afternoonStart').value = '14:00';
                    document.getElementById('afternoonEnd').value = '00:00';
                    document.getElementById('nightStart').value = '22:00';
                    document.getElementById('nightEnd').value = '08:00';
                }
            } else {
                detailsDiv.style.display = 'none';
            }
        }

        // ========== STAFF MANAGEMENT ==========
        function addStaff() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const rank = document.getElementById('staffRank').value.trim();
            const empType = document.getElementById('employmentType').value;
            
            if (!firstName || !lastName) {
                showToast('Please enter first and last name', 'warning');
                return;
            }
            
            const staff = {
                id: staffMembers.length + 1,
                firstName: firstName,
                lastName: lastName,
                fullName: `${firstName} ${lastName}`,
                rank: rank || 'Staff',
                employmentType: empType,
                shiftPreference: document.getElementById('shiftPreference').value,
                leaves: [], // Array of leave dates
                callPreferences: {
                    maxHours: 48,
                    avoidConsecutive: true
                }
            };
            
            staffMembers.push(staff);
            updateStaffList();
            
            // Clear form
            document.getElementById('firstName').value = '';
            document.getElementById('lastName').value = '';
            document.getElementById('staffRank').value = '';
            
            showToast(`Added ${staff.fullName} to roster`, 'success');
        }

        function removeStaff(id) {
            staffMembers = staffMembers.filter(staff => staff.id !== id);
            updateStaffList();
            showToast('Staff member removed', 'info');
        }

        function updateStaffList() {
            const tbody = document.getElementById('staffList');
            
            if (staffMembers.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; color: #94a3b8; padding: 30px;">
                            <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>No staff members added yet</p>
                        </td>
                    </tr>
                `;
            } else {
                let html = '';
                staffMembers.forEach(staff => {
                    html += `
                        <tr>
                            <td><strong>${staff.fullName}</strong></td>
                            <td>${staff.rank}</td>
                            <td><span class="badge" style="background: #e2e8f0; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem;">
                                ${staff.employmentType}
                            </span></td>
                            <td>
                                <button onclick="removeStaff(${staff.id})" style="padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 6px; font-size: 0.8rem;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                tbody.innerHTML = html;
            }
            
            // Update metadata
            document.getElementById('metaStaff').textContent = staffMembers.length;
        }

        // ========== MATHEMATICAL SCHEDULING ALGORITHMS ==========
        function generateIntelligentRoster() {
            if (staffMembers.length < 2) {
                showToast('Add at least 2 staff members', 'warning');
                return;
            }
            
            const loading = document.getElementById('loading');
            loading.style.display = 'block';
            
            // Get configuration
            const config = {
                orgName: document.getElementById('orgName').value || 'Organization',
                department: document.getElementById('department').value || 'Department',
                cadre: document.getElementById('cadre').value || 'Staff',
                startDate: document.getElementById('startDate').value,
                period: parseInt(document.getElementById('planningPeriod').value),
                shiftType: document.getElementById('shiftType').value,
                breakDuration: parseInt(document.getElementById('breakDuration').value),
                maxOvertime: parseInt(document.getElementById('maxOvertime').value),
                minHoursWeek: parseInt(document.getElementById('minHoursWeek').value),
                maxHoursWeek: parseInt(document.getElementById('maxHoursWeek').value),
                morningStart: document.getElementById('morningStart').value,
                morningEnd: document.getElementById('morningEnd').value,
                afternoonStart: document.getElementById('afternoonStart').value,
                afternoonEnd: document.getElementById('afternoonEnd').value,
                nightStart: document.getElementById('nightStart').value,
                nightEnd: document.getElementById('nightEnd').value
            };
            
            // Simulate AI processing
            setTimeout(() => {
                rosterData = createMathematicalSchedule(config);
                displayAdvancedRoster(rosterData, config);
                
                loading.style.display = 'none';
                showToast('Mathematically optimized roster generated!', 'success');
                
                // Update metadata
                updateRosterMetadata(config);
                saveData();
            }, 1500);
        }

        function createMathematicalSchedule(config) {
            const schedule = [];
            const startDate = DateTime.fromISO(config.startDate);
            const totalDays = config.period;
            const shiftType = config.shiftType;
            const staffCount = staffMembers.length;
            
            // Algorithm selection based on shift type
            let algorithm;
            switch(shiftType) {
                case '4x4':
                    algorithm = generate4x4Schedule;
                    break;
                case 'panama':
                    algorithm = generatePanamaSchedule;
                    break;
                case 'pitman':
                    algorithm = generatePitmanSchedule;
                    break;
                case 'dupont':
                    algorithm = generateDupontSchedule;
                    break;
                case 'ddnnoo':
                    algorithm = generateDDNNOOSchedule;
                    break;
                case '4-10':
                    algorithm = generate4_10Schedule;
                    break;
                case '8hour':
                    algorithm = generate8HourSchedule;
                    break;
                case '12hour':
                    algorithm = generate12HourSchedule;
                    break;
                case '24hour':
                    algorithm = generate24HourSchedule;
                    break;
                case '48hour':
                    algorithm = generate48HourSchedule;
                    break;
                case 'mixed':
                    algorithm = generateMixedSchedule;
                    break;
                default:
                    algorithm = generateFairSchedule;
            }
            
            // Generate schedule using selected algorithm
            return algorithm(startDate, totalDays, staffCount, config);
        }

        // ========== MATHEMATICAL ALGORITHMS ==========
        function generate4x4Schedule(startDate, days, staffCount, config) {
            const schedule = [];
            const pattern = ['M', 'A', 'N', 'O']; // 4x4 pattern
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                // Assign shifts using mathematical rotation
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    const patternIndex = (day + i) % pattern.length;
                    const shift = pattern[patternIndex];
                    
                    // Consider staff preferences
                    let finalShift = shift;
                    if (shift === 'M' && staff.shiftPreference === 'night') {
                        finalShift = 'N';
                    } else if (shift === 'N' && staff.shiftPreference === 'morning') {
                        finalShift = 'M';
                    }
                    
                    // Check for leaves
                    const isOnLeave = checkStaffLeave(staff, currentDate);
                    if (isOnLeave) {
                        finalShift = `L-${isOnLeave}`;
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: finalShift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: config.shiftType === '12hour' ? 12 : 8
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function generatePanamaSchedule(startDate, days, staffCount, config) {
            const schedule = [];
            // Panama pattern: 2 on, 2 off, 3 on, 2 off (for 12-hour shifts)
            const panamaPattern = [1, 1, 0, 0, 1, 1, 1, 0, 0]; // 1 = work, 0 = off
            
            // Create teams for Panama schedule (requires multiple of 4)
            const teams = Math.ceil(staffCount / 4);
            const teamAssignments = assignStaffToTeams(teams);
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                // Determine which teams work today
                const patternIndex = day % panamaPattern.length;
                const isWorkDay = panamaPattern[patternIndex] === 1;
                
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    const team = teamAssignments[i];
                    
                    let shift = 'O'; // Default off
                    if (isWorkDay) {
                        // Teams A and C work day shifts, B and D work night shifts
                        if ((patternIndex % 2 === 0 && (team === 'A' || team === 'C')) ||
                            (patternIndex % 2 === 1 && (team === 'B' || team === 'D'))) {
                            shift = patternIndex % 2 === 0 ? 'M' : 'N';
                        }
                    }
                    
                    // Check for leaves
                    const isOnLeave = checkStaffLeave(staff, currentDate);
                    if (isOnLeave) {
                        shift = `L-${isOnLeave}`;
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: 12
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function generatePitmanSchedule(startDate, days, staffCount, config) {
            const schedule = [];
            // Pitman: 4 on, 4 off
            const pitmanPattern = [1, 1, 1, 1, 0, 0, 0, 0];
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    const patternIndex = (day + Math.floor(i / 2)) % pitmanPattern.length;
                    const isWorking = pitmanPattern[patternIndex] === 1;
                    
                    let shift = 'O';
                    if (isWorking) {
                        // Alternate between day and night shifts
                        shift = (i % 2 === 0) ? 'M' : 'N';
                    }
                    
                    // Check for leaves
                    const isOnLeave = checkStaffLeave(staff, currentDate);
                    if (isOnLeave) {
                        shift = `L-${isOnLeave}`;
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: 12
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function generateDDNNOOSchedule(startDate, days, staffCount, config) {
            const schedule = [];
            // DDNNOO: 2D, 2N, 2O
            const pattern = ['D', 'D', 'N', 'N', 'O', 'O'];
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    const patternIndex = (day + i) % pattern.length;
                    let shift = pattern[patternIndex];
                    
                    // Convert D/N to M/N for consistency
                    if (shift === 'D') shift = 'M';
                    if (shift === 'N') shift = 'N';
                    
                    // Check for leaves
                    const isOnLeave = checkStaffLeave(staff, currentDate);
                    if (isOnLeave) {
                        shift = `L-${isOnLeave}`;
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: 12
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function generate4_10Schedule(startDate, days, staffCount, config) {
            const schedule = [];
            // 4-10 schedule: 4 days work, 3 days off
            const pattern = [1, 1, 1, 1, 0, 0, 0];
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                // Create staggered start dates for different groups
                const groups = Math.ceil(staffCount / 7);
                
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    const group = i % groups;
                    const adjustedDay = (day + group * 2) % 7; // Stagger groups
                    const isWorking = pattern[adjustedDay] === 1;
                    
                    let shift = 'O';
                    if (isWorking) {
                        // Assign shifts based on time of day
                        const hour = currentDate.hour;
                        if (hour >= 6 && hour < 16) {
                            shift = 'M';
                        } else if (hour >= 14 && hour < 24) {
                            shift = 'A';
                        } else {
                            shift = 'N';
                        }
                    }
                    
                    // Check for leaves
                    const isOnLeave = checkStaffLeave(staff, currentDate);
                    if (isOnLeave) {
                        shift = `L-${isOnLeave}`;
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: 10
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function generate8HourSchedule(startDate, days, staffCount, config) {
            return generateFairSchedule(startDate, days, staffCount, { ...config, shiftHours: 8 });
        }

        function generate12HourSchedule(startDate, days, staffCount, config) {
            return generateFairSchedule(startDate, days, staffCount, { ...config, shiftHours: 12 });
        }

        function generate24HourSchedule(startDate, days, staffCount, config) {
            const schedule = [];
            // 24 on, 24 off
            const pattern = [1, 0];
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    const patternIndex = (day + i) % pattern.length;
                    const isWorking = pattern[patternIndex] === 1;
                    
                    let shift = 'O';
                    if (isWorking) {
                        shift = 'C'; // Call duty
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: 24
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function generate48HourSchedule(startDate, days, staffCount, config) {
            const schedule = [];
            // Weekend call schedule
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayOfWeek = currentDate.weekday; // 1=Monday, 7=Sunday
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                // Weekend call duty (Friday 8pm to Sunday 8pm)
                const isWeekendCall = (dayOfWeek === 5 && currentDate.hour >= 20) || 
                                     dayOfWeek === 6 || 
                                     (dayOfWeek === 7 && currentDate.hour < 20);
                
                for (let i = 0; i < staffCount; i++) {
                    const staff = staffMembers[i];
                    
                    // Rotate weekend calls among staff
                    const callRotation = Math.floor(day / 7) % staffCount;
                    
                    let shift = 'O';
                    if (isWeekendCall && i === callRotation) {
                        shift = 'C'; // Call duty
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shift,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: isWeekendCall ? 48 : 0
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }
        function generateMixedSchedule(startDate, days, staffCount, config) {
        const schedule = [];
    
       // Extended night duty patterns
       const nightPatterns = [
        { name: '2N2O', pattern: ['N', 'N', 'O', 'O'], days: 4, display: 'N-2N2O' },
        { name: '3N3O', pattern: ['N', 'N', 'N', 'O', 'O', 'O'], days: 6, display: 'N-3N3O' },
        { name: '4N4O', pattern: ['N', 'N', 'N', 'N', 'O', 'O', 'O', 'O'], days: 8, display: 'N-4N4O' },
        { name: '5N5O', pattern: ['N', 'N', 'N', 'N', 'N', 'O', 'O', 'O', 'O', 'O'], days: 10, display: 'N-5N5O' },
        { name: '7N7O', pattern: ['N', 'N', 'N', 'N', 'N', 'N', 'N', 'O', 'O', 'O', 'O', 'O', 'O', 'O'], days: 14, display: 'N-7N7O' }
    ];
    
      // Standard 8-hour pattern
      const standardPattern = ['M', 'A', 'N', 'O'];
    
    // Assign patterns to staff members
    const staffPatterns = [];
    for (let i = 0; i < staffCount; i++) {
        if (i < Math.floor(staffCount * 0.6)) { // 60% on standard shifts
            staffPatterns.push({
                type: 'standard',
                pattern: standardPattern,
                startOffset: i % standardPattern.length,
                hours: 8
            });
        } else { // 40% on extended night duties
            const patternIndex = (i - Math.floor(staffCount * 0.6)) % nightPatterns.length;
            staffPatterns.push({
                type: 'extended',
                pattern: nightPatterns[patternIndex].pattern,
                patternName: nightPatterns[patternIndex].name,
                displayName: nightPatterns[patternIndex].display,
                startOffset: 0,
                hours: 12
            });
        }
    }
    
    for (let day = 0; day < days; day++) {
        const currentDate = startDate.plus({ days: day });
        const dayEntry = {
            date: currentDate.toFormat('yyyy-MM-dd'),
            dayOfWeek: currentDate.toFormat('EEE'),
            formattedDate: currentDate.toFormat('MMM dd'),
            shifts: {}
        };
        
        for (let i = 0; i < staffCount; i++) {
            const staff = staffMembers[i];
            const patternInfo = staffPatterns[i];
            
            let shiftType, shiftHours;
            
            if (patternInfo.type === 'standard') {
                // Standard 8-hour rotation
                const patternIndex = (day + patternInfo.startOffset) % patternInfo.pattern.length;
                shiftType = patternInfo.pattern[patternIndex];
                shiftHours = patternInfo.hours;
            } else {
                // Extended night duty pattern
                const patternIndex = (day + patternInfo.startOffset) % patternInfo.pattern.length;
                const baseShift = patternInfo.pattern[patternIndex];
                
                if (baseShift === 'N') {
                    shiftType = patternInfo.displayName; // N-2N2O, N-3N3O, etc.
                } else {
                    shiftType = baseShift; // 'O' for off days
                }
                shiftHours = baseShift === 'N' ? patternInfo.hours : 0;
            }
            
            // Check for leaves
            const isOnLeave = checkStaffLeave(staff, currentDate);
            if (isOnLeave) {
                shiftType = `L-${isOnLeave}`;
                shiftHours = 0;
            }
            
            dayEntry.shifts[staff.id] = {
                type: shiftType,
                staffName: staff.fullName,
                staffRank: staff.rank,
                hours: shiftHours,
                patternType: patternInfo.type
            };
        }
        
        schedule.push(dayEntry);
    }
    
    return schedule;
}
        function generateFairSchedule(startDate, days, staffCount, config) {
            const schedule = [];
            const shiftHours = config.shiftHours || 8;
            const shiftsPerDay = shiftHours === 12 ? 2 : 3; // 12-hour: 2 shifts, 8-hour: 3 shifts
            
            for (let day = 0; day < days; day++) {
                const currentDate = startDate.plus({ days: day });
                const dayEntry = {
                    date: currentDate.toFormat('yyyy-MM-dd'),
                    dayOfWeek: currentDate.toFormat('EEE'),
                    formattedDate: currentDate.toFormat('MMM dd'),
                    shifts: {}
                };
                
                // Fair distribution algorithm
                for (let shiftIndex = 0; shiftIndex < shiftsPerDay; shiftIndex++) {
                    const staffIndex = (day * shiftsPerDay + shiftIndex) % staffCount;
                    const staff = staffMembers[staffIndex];
                    
                    let shiftType;
                    if (shiftHours === 12) {
                        shiftType = shiftIndex === 0 ? 'M' : 'N';
                    } else {
                        shiftType = shiftIndex === 0 ? 'M' : shiftIndex === 1 ? 'A' : 'N';
                    }
                    
                    // Check for leaves
                    const isOnLeave = checkStaffLeave(staff, currentDate);
                    if (isOnLeave) {
                        shiftType = `L-${isOnLeave}`;
                    }
                    
                    dayEntry.shifts[staff.id] = {
                        type: shiftType,
                        staffName: staff.fullName,
                        staffRank: staff.rank,
                        hours: shiftHours
                    };
                }
                
                schedule.push(dayEntry);
            }
            
            return schedule;
        }

        function assignStaffToTeams(teamCount) {
            const teams = ['A', 'B', 'C', 'D'];
            const assignments = {};
            
            staffMembers.forEach((staff, index) => {
                assignments[staff.id] = teams[index % teams.length];
            });
            
            return assignments;
        }

        function checkStaffLeave(staff, date) {
            // Simplified leave checking
            // In production, this would check against staff.leaves array
            const random = Math.random();
            if (random < 0.05) { // 5% chance of being on leave
                const leaveTypes = ['S', 'M', 'P', 'A', 'ST'];
                return leaveTypes[Math.floor(Math.random() * leaveTypes.length)];
            }
            return false;
        }

        // ========== DISPLAY ADVANCED ROSTER ==========
        function displayAdvancedRoster(schedule, config) {
            const output = document.getElementById('rosterOutput');
            
            if (schedule.length === 0) {
                output.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <i class="fas fa-calendar-alt" style="font-size: 4rem; margin-bottom: 20px; color: #cbd5e1;"></i>
                        <h3 style="color: #475569; margin-bottom: 15px;">No schedule generated</h3>
                    </div>
                `;
                return;
            }
            
            // Calculate statistics
            const stats = calculateRosterStatistics(schedule);
            
            let html = `
                <div class="roster-table-container">
                    <table class="advanced-roster-table">
                        <thead>
                            <tr>
                                <th rowspan="2">Staff</th>
                                <th rowspan="2">Rank</th>
                                <th rowspan="2">Type</th>
            `;
            
            // Add date headers
            schedule.forEach(day => {
                html += `<th colspan="2">${day.formattedDate}<br>${day.dayOfWeek}</th>`;
            });
            
            html += `<th rowspan="2">Total Hours</th></tr><tr>`;
            
            // Add shift type subheaders
            schedule.forEach(() => {
                html += `<th>Shift</th><th>Hours</th>`;
            });
            
            html += `</tr></thead><tbody>`;
            
            // Add staff rows
            staffMembers.forEach(staff => {
                html += `<tr>
                    <td><strong>${staff.fullName}</strong></td>
                    <td>${staff.rank}</td>
                    <td><span style="background: #e2e8f0; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem;">
                        ${staff.employmentType}
                    </span></td>
                `;
                
                let totalHours = 0;
                
                schedule.forEach(day => {
                    const shift = day.shifts[staff.id];
                    if (shift) {
                        const shiftClass = getShiftClass(shift.type);
                        const hours = shift.hours || 0;
                        totalHours += hours;
                        
                        html += `
                            <td>
                                <div class="shift-indicator ${shiftClass}">
                                    ${shift.type}
                                </div>
                            </td>
                            <td>${hours}</td>
                        `;
                    } else {
                        html += `<td>-</td><td>0</td>`;
                    }
                });
                
                html += `<td><strong>${totalHours}</strong></td></tr>`;
            });
            
            // Add totals row
            html += `<tr style="background: #f1f5f9; font-weight: 600;">
                <td colspan="3">Daily Totals</td>`;
            
            schedule.forEach(day => {
                const dayHours = calculateDayHours(day);
                html += `<td colspan="2" style="text-align: center;">${dayHours.total} hrs (${dayHours.staff} staff)</td>`;
            });
            
            html += `<td>${stats.totalHours} hrs</td></tr>`;
            
            html += `</tbody></table></div>`;
            
            // Add summary
            html += `
                <div style="margin-top: 30px; background: #f0f9ff; padding: 25px; border-radius: 16px;">
                    <h3 style="color: #1e40af; margin-bottom: 20px;">
                        <i class="fas fa-chart-bar"></i> Roster Statistics
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <h4>Shift Distribution</h4>
                            <div style="margin-top: 10px;">
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Morning Shifts:</span>
                                    <strong>${stats.shiftCount.M || 0}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Afternoon Shifts:</span>
                                    <strong>${stats.shiftCount.A || 0}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Night Shifts:</span>
                                    <strong>${stats.shiftCount.N || 0}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Off Days:</span>
                                    <strong>${stats.shiftCount.O || 0}</strong>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4>Compliance Check</h4>
                            <div style="margin-top: 10px;">
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Avg Hours/Staff:</span>
                                    <strong>${stats.avgHours.toFixed(1)}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Min Hours:</span>
                                    <strong>${stats.minHours}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                    <span>Max Hours:</span>
                                    <strong>${stats.maxHours}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px 0; color: ${stats.compliant ? '#10b981' : '#ef4444'};">
                                    <span>Compliance:</span>
                                    <strong>${stats.compliant ? '‚úì PASS' : '‚úó FAIL'}</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            output.innerHTML = html;
        }

        function calculateRosterStatistics(schedule) {
            const stats = {
                totalHours: 0,
                shiftCount: { M: 0, A: 0, N: 0, O: 0, C: 0, L: 0 },
                staffHours: {},
                minHours: Infinity,
                maxHours: 0,
                avgHours: 0,
                compliant: true
            };
            
            // Calculate staff hours
            staffMembers.forEach(staff => {
                stats.staffHours[staff.id] = 0;
            });
            
            // Count shifts and hours
            schedule.forEach(day => {
                Object.values(day.shifts).forEach(shift => {
                    if (shift.type && shift.type !== 'O') {
                        const shiftType = shift.type.charAt(0);
                        stats.shiftCount[shiftType] = (stats.shiftCount[shiftType] || 0) + 1;
                        
                        if (shift.hours) {
                            stats.totalHours += shift.hours;
                            stats.staffHours[shift.staffId] = (stats.staffHours[shift.staffId] || 0) + shift.hours;
                        }
                    }
                });
            });
            
            // Calculate min/max/avg
            const hoursArray = Object.values(stats.staffHours);
            if (hoursArray.length > 0) {
                stats.minHours = Math.min(...hoursArray);
                stats.maxHours = Math.max(...hoursArray);
                stats.avgHours = hoursArray.reduce((a, b) => a + b, 0) / hoursArray.length;
            }
            
            // Check compliance
            const maxHoursWeek = parseInt(document.getElementById('maxHoursWeek').value) || 48;
            const minHoursWeek = parseInt(document.getElementById('minHoursWeek').value) || 36;
            const weeks = schedule.length / 7;
            
            stats.compliant = stats.maxHours <= maxHoursWeek * weeks && 
                            stats.minHours >= minHoursWeek * weeks;
            
            return stats;
        }

        function calculateDayHours(day) {
            let totalHours = 0;
            let staffCount = 0;
            
            Object.values(day.shifts).forEach(shift => {
                if (shift.hours && shift.type !== 'O') {
                    totalHours += shift.hours;
                    staffCount++;
                }
            });
            
            return { total: totalHours, staff: staffCount };
        }

        function getShiftClass(shiftType) {
            if (!shiftType) return '';
         // Check for extended night patterns first
            if (shiftType.includes('N-2N2O')) return 'shift-N-2N2O';
            if (shiftType.includes('N-3N3O')) return 'shift-N-3N3O';
            if (shiftType.includes('N-4N4O')) return 'shift-N-4N4O';
            if (shiftType.includes('N-5N5O')) return 'shift-N-5N5O';
            if (shiftType.includes('N-7N7O')) return 'shift-N-7N7O';
            
            const type = shiftType.charAt(0);
            switch(type) {
                case 'M': return 'shift-M';
                case 'A': return 'shift-A';
                case 'N': return 'shift-N';
                case 'O': return 'shift-O';
                case 'C': return 'shift-C';
                case 'L': 
                    const leaveType = shiftType.substring(2);
                    return `leave-${leaveType}`;
                default: return 'shift-M';
            }
        }

        // ========== UTILITY FUNCTIONS ==========
        function updateRosterMetadata(config) {
            document.getElementById('metaOrg').textContent = config.orgName;
            document.getElementById('metaDept').textContent = config.department;
            
            const startDate = DateTime.fromISO(config.startDate);
            const endDate = startDate.plus({ days: config.period - 1 });
            document.getElementById('metaPeriod').textContent = 
                `${startDate.toFormat('MMM dd')} - ${endDate.toFormat('MMM dd, yyyy')}`;
            
            document.getElementById('metaStaff').textContent = staffMembers.length;
        }

        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            
            const colors = {
                success: '#10b981',
                warning: '#f59e0b',
                error: '#ef4444',
                info: '#3b82f6'
            };
            
            toast.style.background = colors[type] || colors.info;
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        function saveData() {
            const data = {
                staffMembers,
                rosterData,
                config: {
                    orgName: document.getElementById('orgName').value,
                    department: document.getElementById('department').value,
                    shiftType: document.getElementById('shiftType').value,
                    startDate: document.getElementById('startDate').value
                },
                timestamp: DateTime.now().toISO()
            };
            
            localStorage.setItem('shiftsync_data', JSON.stringify(data));
        }

        function loadSavedData() {
            const saved = localStorage.getItem('shiftsync_data');
            if (saved) {
                const data = JSON.parse(saved);
                staffMembers = data.staffMembers || [];
                rosterData = data.rosterData || [];
                
                if (data.config) {
                    document.getElementById('orgName').value = data.config.orgName || '';
                    document.getElementById('department').value = data.config.department || '';
                    document.getElementById('shiftType').value = data.config.shiftType || '';
                    if (data.config.startDate) {
                        document.getElementById('startDate').value = data.config.startDate;
                    }
                }
                
                updateStaffList();
                
                if (rosterData.length > 0) {
                    displayAdvancedRoster(rosterData, data.config || {});
                }
            }
        }

        // ========== DONATION FUNCTIONS ==========
        function toggleCrypto() {
            const options = document.getElementById('cryptoOptions');
            const giftCard = document.getElementById('giftCardOptions');
            const isHidden = options.style.display === 'none' || options.style.display === '';
            options.style.display = isHidden ? 'block' : 'none';
            if (isHidden) {
                giftCard.style.display = 'none';
            }
        }
        
        function toggleGiftCard() {
            const giftCard = document.getElementById('giftCardOptions');
            const crypto = document.getElementById('cryptoOptions');
            const isHidden = giftCard.style.display === 'none' || giftCard.style.display === '';
            giftCard.style.display = isHidden ? 'block' : 'none';
            if (isHidden) {
                crypto.style.display = 'none';
            }
        }
        
        function copyCryptoAddress(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent.trim();
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = element.textContent;
                element.textContent = 'Copied! ‚úì';
                element.style.color = '#10b981';
                element.style.fontWeight = '600';
                
                setTimeout(() => {
                    element.textContent = originalText;
                    element.style.color = '';
                    element.style.fontWeight = '';
                }, 2000);
                
                showToast('Address copied to clipboard', 'success');
            }).catch(err => {
                console.error('Copy failed:', err);
                showToast('Please copy the address manually', 'warning');
            });
        }

        // ========== EXPORT FUNCTIONS ==========
        function exportPDF() {
            if (rosterData.length === 0) {
                showToast('Generate a roster first', 'warning');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('landscape');
            
            // Add header
            doc.setFontSize(20);
            doc.setTextColor(59, 130, 246);
            doc.text('ShiftSync - Advanced Roster', 20, 20);
            
            // Add metadata
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(`Organization: ${document.getElementById('orgName').value || 'N/A'}`, 20, 35);
            doc.text(`Period: ${document.getElementById('startDate').value} (${rosterData.length} days)`, 20, 42);
            
            // Simple table representation
            let yPos = 60;
            doc.setFontSize(10);
            
            // For simplicity, export first 7 days
            const daysToExport = Math.min(7, rosterData.length);
            for (let i = 0; i < daysToExport; i++) {
                const day = rosterData[i];
                doc.text(`${day.formattedDate} (${day.dayOfWeek}):`, 20, yPos);
                yPos += 7;
                
                // Show first 5 staff
                const staffIds = Object.keys(day.shifts).slice(0, 5);
                staffIds.forEach(staffId => {
                    const shift = day.shifts[staffId];
                    doc.text(`  ${shift.staffName}: ${shift.type} (${shift.hours}h)`, 25, yPos);
                    yPos += 5;
                });
                
                yPos += 10;
                if (yPos > 280) {
                    doc.addPage();
                    yPos = 20;
                }
            }
            
            doc.save(`shiftsync_roster_${DateTime.now().toFormat('yyyy-MM-dd')}.pdf`);
            showToast('PDF exported successfully', 'success');
        }

        function exportExcel() {
            if (rosterData.length === 0) {
                showToast('Generate a roster first', 'warning');
                return;
            }
            
            // Prepare data
            const headers = ['Staff Name', 'Rank', 'Type'];
            rosterData.forEach(day => {
                headers.push(`${day.formattedDate} (${day.dayOfWeek}) Shift`);
                headers.push(`${day.formattedDate} (${day.dayOfWeek}) Hours`);
            });
            headers.push('Total Hours');
            
            const data = [headers];
            
            // Add staff rows
            staffMembers.forEach(staff => {
                const row = [staff.fullName, staff.rank, staff.employmentType];
                let totalHours = 0;
                
                rosterData.forEach(day => {
                    const shift = day.shifts[staff.id];
                    if (shift) {
                        row.push(shift.type);
                        row.push(shift.hours || 0);
                        totalHours += shift.hours || 0;
                    } else {
                        row.push('O');
                        row.push(0);
                    }
                });
                
                row.push(totalHours);
                data.push(row);
            });
            
            // Create worksheet
            const ws = XLSX.utils.aoa_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Roster');
            XLSX.writeFile(wb, `shiftsync_roster_${DateTime.now().toFormat('yyyy-MM-dd')}.xlsx`);
            
            showToast('Excel file exported successfully', 'success');
        }

        function printRoster() {
            if (rosterData.length === 0) {
                showToast('Generate a roster first', 'warning');
                return;
            }
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>ShiftSync Roster - Print</title>
                    <style>
                        body { font-family: Arial; padding: 20px; }
                        h1 { color: #3b82f6; }
                        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 12px; }
                        th { background: #3b82f6; color: white; padding: 10px; text-align: center; }
                        td { border: 1px solid #ddd; padding: 8px; text-align: center; }
                        .print-btn { margin-top: 30px; }
                        @media print { 
                            .print-btn { display: none; }
                            body { padding: 0; }
                        }
                    </style>
                </head>
                <body>
                    <h1>ShiftSync Roster</h1>
                    <p><strong>Organization:</strong> ${document.getElementById('orgName').value || 'N/A'}</p>
                    <p><strong>Period:</strong> ${rosterData.length} days</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Staff</th>
                                <th>Rank</th>
                                ${rosterData.map(day => `<th>${day.formattedDate}<br>${day.dayOfWeek}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${staffMembers.map(staff => `
                                <tr>
                                    <td>${staff.fullName}</td>
                                    <td>${staff.rank}</td>
                                    ${rosterData.map(day => {
                                        const shift = day.shifts[staff.id];
                                        return `<td>${shift ? shift.type : 'O'}</td>`;
                                    }).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    
                    <div class="print-btn">
                        <button onclick="window.print()" style="padding: 12px 24px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            Print Roster
                        </button>
                    </div>
                </body>
                </html>
            `);
            printWindow.document.close();
        }

        function saveRoster() {
            saveData();
            showToast('Roster saved to browser storage', 'success');
        }

        // Add fade-in animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
